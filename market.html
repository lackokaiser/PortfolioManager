<!DOCTYPE html>
<html>
    <head>
        <title>Markets</title>
        <style>
            body{
                font-family:sans-serif;
                margin:20px;
            }
            table{
                border-collapse: collapse;
                width: 100%;
                margin-top: 10px;
            }
            th, td {
                border: 1px solid ccc;
                padding: 6px;
                text-align: center;
            }
            th{
                background-color: f2f2f2;
            }
        </style>
    </head>
    <body>
        <h1>Stocks</h1>
        <table id="stock-table">
            <thead>
                <tr>
                    <th>Ticker</th>
                    <th>Date</th>
                    <th>Open</th>
                    <th>High</th>
                    <th>Low</th>
                    <th>Close</th>
                    <th>Volume</th>
                </tr>
            </thead>
            <tbody id="table-body">
                <tr><td colspan="7">Loading...</td></tr>
            </tbody>
        </table>

        <script>
            const symbols = ["AAPL", "MSFT", "GOOGL", "TSLA"];
            const tbody = document.getElementById("table-body");

            async function loadStockDate() {
                try{
                    const response = await fetch(`/stocks?symbols=${symbols.join(",")}`);
                    const data = await response.json();

                    if (!data || date.length === 0) {
                        tbody.innerHTML = "<tr><td colspan='7'>No data available.</td><tr>";
                            return;
                    }

                    tbdoy.innerHTML = "";
                    data.forEach(stock => {
                        const row = document.createElement("tr");
                        row.innerHTML = `
                        <td>${stock.Symbol}</td>
                        <td>${stock.Date}</td>
                        <td>${stock.Open}</td>
                        <td>${stock.High}</td>
                        <td>${stock.Low}</td>
                        <td>${stock.Close}</td>
                        <td>${stock.Volume.toLocaleString()}</td>
                        `;
                        tbody.appendChild(row);
                        
                    });

                } catch (error) {
                    console.error("Error loading stock data:", error);
                    tbody.innerHTML = `<tr><td colspan='7'>Error: ${error.message}</td></tr>`;
                }
            }
            loadStockDate();
        </script>
    </body>
</html>